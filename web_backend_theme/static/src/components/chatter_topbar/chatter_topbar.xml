<?xml version="1.0" encoding="UTF-8" ?>
<templates>

    <t t-inherit="mail.ChatterTopbar" t-inherit-mode="extension">

        <!-- Remove original "Send message" button -->
        <xpath
            expr="//t[@t-if='chatter.threadView']/button[hasclass('o_ChatterTopbar_buttonSendMessage')]"
            position="replace"
        >
        </xpath>

        <!-- Recreate "Send message" button on the right side -->
        <xpath expr="//t[@t-if='chatter.hasActivities']" position="after">
            <t t-if="chatter.threadView">
                <button
                    class="btn btn-info o_ChatterTopbar_button o_ChatterTopbar_buttonSendMessage"
                    type="button"
                    t-att-class="{
                        'o-active': chatter.isComposerVisible and chatter.composer and !chatter.composer.isLog,
                        'o-bordered': chatter.hasExternalBorder,
                    }"
                    t-att-disabled="chatter.isDisabled"
                    t-on-click="_onClickSendMessage"
                >
                    <i class="fa fa-envelope" />
                    Send e-mail
                </button>
            </t>
        </xpath>

        <!-- Clear original "Log note" text -->
        <xpath
            expr="//t[@t-if='chatter.threadView']/button[hasclass('o_ChatterTopbar_buttonLogNote')]"
            position="text"
        />
        
        <!-- Recreate "Log note" text with an icon -->
        <xpath
            expr="//t[@t-if='chatter.threadView']/button[hasclass('o_ChatterTopbar_buttonLogNote')]"
            position="inside"
        >
            <i class="fa fa-pencil" />
            Log note
        </xpath>
    </t>

</templates>
