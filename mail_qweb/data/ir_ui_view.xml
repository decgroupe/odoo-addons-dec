<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <template id="view_email_template_part_partners_avatar">
        <style>
            .table_avatar {
                margin-top:8px;
                width:100%;
                align:center;
            }
            .tr_avatar {
                line-height:normal;
            }
            .td_avatar {
                width:10%;
                padding-right:8px;
                text-align:right;
            }
            .td_partner {
                width:70%;
            }
            .td_partner a {
                text-decoration:none;
                font-family:'Google Sans',Roboto,RobotoDraft,Helvetica,Arial,sans-serif;
                color:rgba(0,0,0,0.87);
                font-size:12px;
                line-height:16px;
            }
            .td_notify {
                width:20%;
            }
            .img_avatar {
                width:16px;
                height:16px;
                vertical-align:sub;
                border-radius:50%;
            }
        </style>
        <table class="table_avatar" cellspacing="0" cellpadding="0" border="0">
            <tbody>
                <t t-foreach="partners" t-as="partner">
                    <tr class="tr_avatar">
                        <td class="td_avatar">
                            <img
                                class="img_avatar"
                                t-attf-src="/web/image/res.partner/{{partner.id}}/image_128"
                            />
                        </td>
                        <td class="td_partner">
                            <a t-if="partner">
                                <a t-attf-href="mailto:{{partner.email_formatted}}"><t
                                        t-esc="partner.display_name"
                                    /></a>
                            </a>
                        </td>
                        <td class="td_notify">
                            <i t-if="notifs.get(partner.id) == 'email'">e-mail</i>
                            <i t-if="notifs.get(partner.id) == 'inbox'">odoo</i>
                        </td>
                    </tr>
                </t>
            </tbody>
        </table>
    </template>


    <template id="view_email_template_part_user_avatar">
        <style>
            .table_avatar {
                margin-top:8px;
            }
            .img_avatar {
                width:20px;
                height:20px;
                vertical-align:sub;
                border-radius:50%;
            }
            .table_avatar a {
                font-family:'Google Sans',Roboto,RobotoDraft,Helvetica,Arial,sans-serif;
                color:rgba(0,0,0,0.87);
                font-size:14px;
                line-height:20px;
            }
        </style>
        <table
            class="table_avatar"
            align="center"
            cellspacing="0"
            cellpadding="0"
            border="0"
        >
            <tbody>
                <tr style="line-height:normal">
                    <td style="padding-right:8px" align="right">
                        <img
                            class="img_avatar"
                            t-attf-src="/web/image/res.users/{{user.id}}/image_128"
                            width="20"
                            height="20"
                        />
                    </td>
                    <td>
                        <a t-if="user.login">
                            <t t-esc="user.login" />
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
    </template>

    <template id="view_email_template_part_footer">
        <style>
            #footer {
                font-family:Roboto-Regular,Helvetica,Arial,sans-serif;color:rgba(0,0,0,0.54);
                font-size:11px;
                line-height:18px;
                padding-top:12px;
                text-align:center;
            }
            #footer a {
                font-family:Roboto-Regular,Helvetica,Arial,sans-serif;color:rgba(0,0,0,0.54);
                font-size:11px;
                line-height:18px;
                padding-top:12px;
                text-align:center;
            }
        </style>
        <div id="footer">
            <div id="footer_message">
                <t t-if="footer_message">
                    <t t-raw="footer_message" />
                </t>
                <t t-if="notify_account_changes">
                    You have received this email to notify you of important changes to your account and services
                </t>
            </div>

            <!-- <div>Cet e-mail vous a été envoyé pour vous informer de modifications importantes apportées à votre compte (DEC-ID) et aux services DEC que vous utilisez.</div> -->
            <div>
                <t t-esc="'%s %d' % ('©', datetime.datetime.now().year)" />
                <t t-esc="env.user.company_id.name" />
                <t
                    t-esc="env.user.company_id.partner_id.partner_company_type_id.shortcut"
                />
,                <a>
                    <t
                        t-if="env.user.company_id.partner_id.street"
                        t-esc="env.user.company_id.partner_id.street"
                    />
                    <t
                        t-if="env.user.company_id.partner_id.street2"
                        t-esc="env.user.company_id.partner_id.street2"
                    />
                    <t
                        t-if="env.user.company_id.partner_id.zip"
                        t-esc="env.user.company_id.partner_id.zip"
                    />
                    <t
                        t-if="env.user.company_id.partner_id.city"
                        t-esc="env.user.company_id.partner_id.city"
                    />
                    <t
                        t-if="env.user.company_id.partner_id.country_id"
                        t-esc="env.user.company_id.partner_id.country_id.code"
                    />
                </a>
            </div>
        </div>
    </template>

    <template id="view_email_template_part_also_notified">
        <!-- <t t-esc="notification_group_name"/> -->
        <p class="notify_title">Also notified:</p>
        <t t-foreach="recipients_groups_data" t-as="recipients_group_data">
            <p
                class="notify_group"
                t-if="recipients_group_data['notification_group_name'] == 'user'"
            >Internal Users</p>
            <p
                class="notify_group"
                t-if="recipients_group_data['notification_group_name'] in ('portal', 'portal_customer')"
            >Portal Users</p>
            <p
                class="notify_group"
                t-if="recipients_group_data['notification_group_name'] == 'customer'"
            >External Partners</p>
            <t t-set="partners" t-value="recipients_group_data['_recipients']" />
            <t t-set="notifs" t-value="recipients_group_data['_notif_mode']" />
            <div>
                <t t-call="mail_qweb.view_email_template_part_partners_avatar" />
            </div>
        </t>
    </template>

    <template id="view_email_template_notification">
        <html>
            <head>
                <style>
                    .div_root {
                        margin:0;
                        padding:0;
                    }
                    .table_root {
                        min-width:348px;
                    }
                    .table_content {
                        padding-bottom:20px;
                        max-width:516px;
                        min-width:220px;
                    }
                    .table_footer {}

                    .div_content_border {
                        border-style:solid;
                        border-width:thin;
                        border-color:#dadce0;
                        border-radius:8px;
                        padding:40px 20px;
                    }
                    .img_logo {
                        margin-bottom:16px;
                        height:24px;
                    }

                    #content_subject_container {
                        font-family:'Google Sans',Roboto,RobotoDraft,Helvetica,Arial,sans-serif;
                        border-bottom:thin solid #dadce0;
                        color:rgba(0,0,0,0.87);
                        line-height:32px;
                        padding-bottom:24px;
                        text-align:center;
                        word-break:break-word;
                    }
                    #content_subject {
                        font-size:24px;
                    }
                    #content_warning {
                        font-family:Roboto-Regular,Helvetica,Arial,sans-serif;
                        text-align:center;
                        color: #FFFFFF;
                        font-size: 10px;
                        background-color: #414141;
                        border-radius:8px;
                        padding: 5px;
                        margin-bottom: 16px;
                    }
                    #content_message {
                        font-family:Roboto-Regular,Helvetica,Arial,sans-serif;
                        font-size:14px;
                        color:rgba(0,0,0,0.87);
                        line-height:20px;
                        padding-top:20px;
                        text-align:center;
                    }
                    #content_message ul {
                        text-align:left;
                    }
                    #content_message_action {
                        padding-top:32px;
                        text-align:center;
                    }
                    #content_message_action a {
                        font-family:'Google Sans',Roboto,RobotoDraft,Helvetica,Arial,sans-serif;
                        line-height:16px;
                        color:#ffffff;
                        font-weight:400;
                        text-decoration:none;
                        font-size:14px;
                        display:inline-block;
                        padding:10px 24px;
                        background-color:#414141;
                        border-radius:5px;
                        min-width:90px;
                    }
                    #content_message_bottom {
                        font-family:Roboto-Regular,Helvetica,Arial,sans-serif;
                        font-size:12px;
                        line-height:16px;
                        color:#606060;
                        letter-spacing:0.3px;
                        padding-top:20px;
                        text-align:center;
                    }
                    #content_message_bottom a {
                        color:rgba(0,0,0,0.87);
                        text-decoration:inherit;
                    }
                    #content_message_bottom_cc {
                        font-family:Roboto-Regular,Helvetica,Arial,sans-serif;
                        font-size:12px;
                        line-height:16px;
                        color:#606060;
                        letter-spacing:0.3px;
                        padding-top:20px;
                        text-align:left;
                        overflow: auto;
                    }
                    #content_message_bottom_cc .notify_title {
                        text-align:left;
                        text-decoration: underline;
                        margin: 0;
                    }
                    #content_message_bottom_cc .notify_group {
                        text-align:left;
                        font-weight:600;
                        margin-bottom: 0;
                        margin-left: 10px;
                    }
                    #content_message_signature {
                        border-top:thin solid #dadce0;
                        margin-top: 30px;
                        font-family:Roboto-Regular,Helvetica,Arial,sans-serif;
                        font-size:12px;
                        color:rgba(0,0,0,0.64);
                    }
                </style>
            </head>
            <body>

                <div class="div_root" bgcolor="#FFFFFF">
                    <table
                        class="table_root"
                        width="100%"
                        lang="en"
                        height="100%"
                        cellspacing="0"
                        cellpadding="0"
                        border="0"
                    >
                        <tbody>
                            <tr style="height:32px" height="32">
                                <td />
                            </tr>
                            <tr align="center">
                                <td>
                                    <div>
                                        <table
                                            class="table_content"
                                            cellspacing="0"
                                            cellpadding="0"
                                            border="0"
                                        >
                                            <tbody>
                                                <tr>
                                                    <td style="width:8px" width="8" />
                                                    <td>
                                                        <div id="header">
                                                            <div id="header_message">
                                                                <t
                                                                    t-if="header_message"
                                                                >
                                                                    <t
                                                                        t-raw="header_message"
                                                                    />
                                                                </t>
                                                                <div
                                                                    id="content_warning"
                                                                    t-if="content_warning"
                                                                >
                                                                    <t
                                                                        t-raw="content_warning"
                                                                    />
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div
                                                            class="div_content_border"
                                                            align="center"
                                                        >
                                                            <img
                                                                class="img_logo"
                                                                t-attf-src="/web/image/website/{{env.user.company_id.id}}/logo"
                                                                t-attf-alt="{{env.user.company_id.name}}"
                                                            />
                                                            <div
                                                                id="content_subject_container"
                                                            >
                                                                <div
                                                                    id="content_subject"
                                                                    t-if="content_subject"
                                                                >
                                                                    <t
                                                                        t-esc="content_subject"
                                                                    />
                                                                </div>
                                                            </div>

                                                            <div
                                                                t-if="content_message"
                                                                id="content_message"
                                                            >
                                                                <t
                                                                    t-raw="content_message"
                                                                />
                                                                <div
                                                                    id="content_message_action"
                                                                    t-if="content_message_action"
                                                                >
                                                                <t
                                                                        t-raw="content_message_action"
                                                                    />
                                                                </div>
                                                            </div>
                                                            <div
                                                                t-if="content_message_bottom"
                                                                id="content_message_bottom"
                                                            >
                                                                <t
                                                                    t-raw="content_message_bottom"
                                                                />
                                                            </div>
                                                            <div
                                                                t-if="content_message_bottom_cc"
                                                                id="content_message_bottom_cc"
                                                            >
                                                                <t
                                                                    t-raw="content_message_bottom_cc"
                                                                />
                                                            </div>
                                                            <div
                                                                t-if="content_message_signature"
                                                                id="content_message_signature"
                                                            >
                                                                <t
                                                                    t-raw="content_message_signature"
                                                                />
                                                            </div>
                                                        </div>

                                                        <t
                                                            t-call="mail_qweb.view_email_template_part_footer"
                                                        />
                                                    </td>
                                                    <td style="width:8px" width="8" />
                                                </tr>
                                            </tbody>
                                        </table>

                                    </div>
                                </td>
                            </tr>
                            <tr style="height:32px" height="32">
                                <td />
                            </tr>
                        </tbody>
                    </table>
                </div>
            </body>
        </html>
    </template>

    <!-- Override Odoo's default mail notification layout -->
    <template id="mail.message_notification_email">
        <t t-call="mail_qweb.view_email_template_notification">
            <t t-set="env" t-value="message.env" />
            <t t-set="content_subject">
                <t t-if="message.subject">
                    <t t-raw="message.subject" />
                </t>
                <t t-else="">
                    <t t-raw="record.name" />
                </t>
            </t>
            <t t-set="header_message">
                <div
                    t-if="has_button_access"
                    itemscope="itemscope"
                    itemtype="http://schema.org/EmailMessage"
                >
                    <div
                        itemprop="potentialAction"
                        itemscope="itemscope"
                        itemtype="http://schema.org/ViewAction"
                    >
                        <link itemprop="target" t-att-href="button_access['url']" />
                        <link itemprop="url" t-att-href="button_access['url']" />
                        <meta itemprop="name" t-att-content="button_access['title']" />
                    </div>
                </div>
            </t>
            <t t-set="content_warning" t-if="subtype.internal">
                <strong>Internal communication :</strong>
                Replying will post an internal note. Followers won't receive any email notification.
            </t>
            <t
                t-set="content_message_action"
                t-if="(has_button_access or len(actions) &gt; 0)"
            >
                <div summary="o_mail_notification">
                    <t t-if="has_button_access">
                        <a t-att-href="button_access['url']">
                            <t t-esc="button_access['title']" />
                        </a>
                    </t>
                    <t t-if="actions">
                        <t t-foreach="actions" t-as="action">
                            |
                            <a t-att-href="action['url']">
                                <t t-esc="action['title']" />
                            </a>
                        </t>
                    </t>
                </div>
            </t>
            <t t-set="content_message">
                <div t-raw="message.body" />
                <ul t-if="tracking_values">
                    <t t-foreach="tracking_values" t-as="tracking">
                        <li><t t-esc="tracking[0]" />: <t
                                t-esc="tracking[1]"
                            /> -&gt; <t t-esc="tracking[2]" /></li>
                    </t>
                </ul>
            </t>

            <t
                t-set="content_message_bottom_cc"
                t-if="notification_group_name not in ('customer','portal','portal_customer')"
            >
                <t t-call="mail_qweb.view_email_template_part_also_notified" />
            </t>

            <t t-set="content_message_signature" t-if="signature">
                <t t-raw="signature" />
            </t>
        </t>
    </template>

    <!-- Override Odoo's default mail notification light layout -->
    <template id="mail.mail_notification_light">
        <t t-call="mail_qweb.view_email_template_notification">
            <t t-set="env" t-value="message.env" />
            <t t-set="content_subject">
                <t t-raw="message.subject" />
            </t>
            <t t-set="content_message">
                <t t-raw="message.body" />
            </t>
            <t
                t-set="content_message_bottom_cc"
                t-if="notification_group_name not in ('customer','portal','portal_customer')"
            >
                <t t-call="mail_qweb.view_email_template_part_also_notified" />
            </t>
        </t>
    </template>

</odoo>
